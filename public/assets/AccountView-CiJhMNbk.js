import{e as A,u as I,f as g,g as L,s as _,h as N,i as h,j as T,o as a,c as i,d as n,t as u,k,_ as v,l as w,r as b,a as C,w as S,m as V,n as y,q as f,F as x,v as $,x as E}from"./index-CMllRGcT.js";import{A as M}from"./AppLoader-BCzZN1Er.js";const R={key:0,class:"account-info"},D={__name:"AccountDetails",props:{accountId:String},setup(r){const t=A(null),s=I();function c(o){if(!o)return s.push({query:{}});s.push({query:{id:o}})}g(async()=>{L.on("copy",()=>{navigator.clipboard.writeText(t.value.passwordHash),_("Copied to clipboard")});try{setTimeout(async()=>{t.value=await N.getById(e.accountId),c(t.value._id)},1e3),_("Make sure to keep your password safe")}catch{h("Could not load account details")}}),T(()=>{c()});const e=r;return(o,d)=>t.value?(a(),i("section",R,[n("p",null,u(t.value.username),1),n("p",null,u(t.value.password),1),n("p",null,u(t.value.otherField),1)])):k("",!0)}},j=["src","alt"],q={class:"actions-container grid grid-dir-cols"},F={class:"msg-container"},H={__name:"AccountPreview",props:{account:Object},emits:["removeAccount"],setup(r,{emit:t}){const s=t,c=A(!1),e=r,o=w(()=>`https://cdn.jsdelivr.net/npm/simple-icons@latest/icons/${e.account.icon.toLowerCase()}.svg`);function d(m){m.target.src="https://res.cloudinary.com/tal-amit-dev/image/upload/v1721847204/accounts-keeper/default-account_tkg5yi.png"}function p(){confirm("Are you sure you want to delete this account?")&&s("removeAccount",e.account._id)}return(m,l)=>{const B=b("RouterLink");return a(),i("article",{class:"account-preview grid",onClick:l[1]||(l[1]=J=>c.value=!c.value)},[n("h2",null,u(e.account.accountTitle),1),n("p",null,u(e.account.type||"No Type"),1),n("p",null,u(e.account.notes||"No Notes Added"),1),n("img",{src:o.value,width:"100",height:"100",alt:e.account.accountTitle,onError:d},null,40,j),n("section",q,[C(B,{class:"primary-btn",onClick:l[0]||(l[0]=y(()=>{},["stop"])),to:{name:"account-add-edit",params:{id:e.account._id}}},{default:S(()=>[V(" Edit ")]),_:1},8,["to"]),n("button",{class:"primary-btn",onClick:y(p,["stop"])},"Delete Account")]),n("section",null,[c.value?(a(),f(D,{key:0,accountId:e.account._id},null,8,["accountId"])):k("",!0)]),n("span",F,u(c.value?"Click To Hide credentials":"Click to see Account credentials"),1)])}}},O=v(H,[["__scopeId","data-v-9ec0810f"]]),P={class:"account-list"},Q={__name:"AccountList",props:{accounts:Array},emits:["removeAccount"],setup(r){const t=r;return(s,c)=>(a(),i("section",P,[(a(!0),i(x,null,$(t.accounts,e=>(a(),f(O,{key:e.id,account:e,onRemoveAccount:c[0]||(c[0]=o=>s.$emit("removeAccount",o))},null,8,["account"]))),128))]))}},U=v(Q,[["__scopeId","data-v-d3631861"]]),z={class:"account-view"},G={__name:"AccountView",setup(r){const t=E(),s=w(()=>t.getAccounts);g(()=>{c()});async function c(){try{await t.loadAccounts(),_("Accounts loaded successfully","success")}catch{h("Error loading accounts")}}function e(o){console.log("remove account",o),t.removeAccount(o)}return(o,d)=>(a(),i("section",z,[s.value?(a(),f(U,{key:0,accounts:s.value,onRemoveAccount:e},null,8,["accounts"])):(a(),i(x,{key:1},$(5,p=>C(M,{key:p,type:"list"})),64))]))}},X=v(G,[["__scopeId","data-v-d9a75e35"]]);export{X as default};
